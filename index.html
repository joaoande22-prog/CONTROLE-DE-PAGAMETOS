<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kickboxing CobranÃ§a - WhatsApp Business</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Montserrat',sans-serif;}
body{background:linear-gradient(135deg,#000,#1a1a1a);color:#f1f1f1;padding:20px;}
header{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;flex-wrap:wrap;text-align:center;}
header img{width:70px;height:auto;border-radius:10px;}
header h1{color:#ffcc00;font-size:18px;margin-top:10px;}
h2{text-align:center;color:#ffcc00;margin-bottom:15px;}
input,select,button{padding:12px;margin:5px 0;border-radius:10px;border:none;font-size:16px;width:100%;}
input,select{background:#222;color:#fff;}
input::placeholder,select{color:#aaa;}
button{cursor:pointer;transition:0.3s;font-weight:bold;}
#btnSalvar{background:#ff5722;color:#fff;}
#btnExportar{background:#2196f3;color:#fff;}
#btnImportar{background:#9c27b0;color:#fff;}
button:hover{opacity:0.85;}
#formCadastro{display:flex;flex-direction:column;gap:8px;margin-bottom:20px;}
#buscaAluno{width:100%;margin:15px 0;}
#listasHorarios{display:flex;flex-direction:column;gap:20px;}
.section{flex:1;background:#111;padding:10px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,0.6);}
ul{list-style:none;padding:0;}
li{margin:5px 0;padding:12px;border-radius:10px;display:flex;flex-direction:column;gap:5px;background:#222;box-shadow:0 2px 6px rgba(0,0,0,0.6);}
li span{font-size:15px;font-weight:500;}
.actions{display:flex;flex-wrap:wrap;gap:6px;}
.actions button{flex:1;padding:8px;border-radius:8px;font-size:14px;font-weight:bold;color:#fff;min-width:80px;}
.actions button.whatsapp{background:#25d366;}
.actions button.pago{background:#ff9800;}
.actions button.copiar{background:#2196f3;}
.actions button.excluir{background:#f44336;}
.actions button.editar{background:#9c27b0;}
#resumoFinanceiro{font-weight:bold;margin-bottom:15px;text-align:center;}
h3{color:#ffcc00;margin-bottom:10px;text-align:center;}
h4{margin:6px 0;color:#fff;text-align:center;font-size:14px;}
@media(min-width:700px){
  body{padding:40px;}
  #formCadastro{flex-direction:row;flex-wrap:wrap;align-items:flex-start;}
  input,select,button{width:auto;flex:1;min-width:140px;}
  #btnSalvar,#btnExportar,#btnImportar{width:auto;}
  #listasHorarios{flex-direction:row;flex-wrap:wrap;}
  .section{padding:15px;width:48%;}
}
</style>
</head>
<body>

<header>
  <img src="Imagem do WhatsApp de 2025-10-27 Ã (s) 08.55.56_18b7c426.jpg" alt="Logo Kickboxing">
  <h1 id="dataHoje"></h1>
</header>

<h2>ğŸ”¥ Kickboxing CobranÃ§a - WhatsApp Business</h2>

<div id="formCadastro">
  <input type="text" id="nome" placeholder="Nome do aluno">
  <input type="text" id="telefone" placeholder="Telefone (somente nÃºmeros)">
  <input type="number" id="valor" placeholder="Valor da mensalidade">
  <select id="horario">
    <option value="7">7:00</option>
    <option value="8">8:00</option>
    <option value="feminino">Kickboxing Feminino</option>
    <option value="kids">Kickboxing Kids</option>
  </select>
  <button id="btnSalvar">ğŸ’¾ Salvar / Editar</button>
  <button id="btnExportar">â¬†ï¸ Exportar Dados</button>
  <button id="btnImportar">â¬‡ï¸ Importar Dados</button>
  <input type="file" id="inputImport" style="display:none" accept=".txt">
</div>

<input type="text" id="buscaAluno" placeholder="ğŸ” Buscar aluno...">
<div id="resumoFinanceiro">ğŸ”´ Pendentes: R$0.00 | ğŸŸ¢ Pagos: R$0.00</div>

<div id="listasHorarios">
  <div class="section">
    <h3>ğŸ•– HorÃ¡rio 7:00</h3>
    <h4>ğŸ”´ Pendentes</h4>
    <ul id="listaPendentes7"></ul>
    <h4>ğŸŸ¢ Pagos</h4>
    <ul id="listaPagos7"></ul>
  </div>

  <div class="section">
    <h3>ğŸ•— HorÃ¡rio 8:00</h3>
    <h4>ğŸ”´ Pendentes</h4>
    <ul id="listaPendentes8"></ul>
    <h4>ğŸŸ¢ Pagos</h4>
    <ul id="listaPagos8"></ul>
  </div>

  <div class="section">
    <h3>ğŸ¥Š Kickboxing Feminino</h3>
    <h4>ğŸ”´ Pendentes</h4>
    <ul id="listaPendentesFeminino"></ul>
    <h4>ğŸŸ¢ Pagos</h4>
    <ul id="listaPagosFeminino"></ul>
  </div>

  <div class="section">
    <h3>ğŸ§’ Kickboxing Kids</h3>
    <h4>ğŸ”´ Pendentes</h4>
    <ul id="listaPendentesKids"></ul>
    <h4>ğŸŸ¢ Pagos</h4>
    <ul id="listaPagosKids"></ul>
  </div>
</div>

<script>
// === DATA ===
function atualizarCabecalhoData(){
  const hoje=new Date();
  document.getElementById("dataHoje").innerText=hoje.toLocaleDateString('pt-BR',{weekday:'long',year:'numeric',month:'long',day:'numeric'});
}

// === MENSAGENS WHATSAPP ===
const mensagens=[
  "Oi [NOME]! Lembrando do pagamento da mensalidade ğŸ’ªğŸ”¥",
  "Fala [NOME]! Bora acertar a mensalidade pra continuar firme no kickboxing ğŸ¥Š",
  "Ei [NOME], tudo bem? SÃ³ lembrando da mensalidade desse mÃªs ğŸ˜„",
  "OlÃ¡ [NOME]! Esperamos vocÃª nas aulas, nÃ£o esqueÃ§a do pagamento ğŸ’¥",
  "Oi [NOME]! Hora de manter a energia e acertar a mensalidade ğŸ’ª"
];

function enviarWhatsApp(nome,telefone,valor){
  const numero=telefone.replace(/\D/g,'');
  const msg=mensagens[Math.floor(Math.random()*mensagens.length)].replace("[NOME]",nome);
  const texto=`${msg} | Valor: R$${valor.toFixed(2)}`;
  window.open(`https://wa.me/55${numero}?text=${encodeURIComponent(texto)}`,"_blank");
}

// === BANCO LOCAL ===
function getAlunos(){return JSON.parse(localStorage.getItem("alunos")||"[]");}
function setAlunos(alunos){localStorage.setItem("alunos",JSON.stringify(alunos));}

// === SALVAR / EDITAR ===
let editandoId=null;
function salvarAluno(nome,telefone,valor,horario){
  const alunos=getAlunos();
  if(editandoId){
    const att=alunos.map(a=>a.id===editandoId?{...a,nome,telefone,valor,horario}:a);
    setAlunos(att);editandoId=null;alert("âœï¸ Aluno editado!");
  }else{
    alunos.push({id:Date.now(),nome,telefone,valor,pago:false,data:new Date().toISOString(),horario});
    setAlunos(alunos);alert("âœ… Aluno salvo!");
  }
  limparCampos();carregarListas();
}

// === EDITAR / EXCLUIR ===
function editarAluno(id){
  const a=getAlunos().find(x=>x.id===id);
  if(!a)return;
  nome.value=a.nome;telefone.value=a.telefone;valor.value=a.valor;horario.value=a.horario;editandoId=id;
}
function excluirAluno(id){
  if(confirm("âŒ Tem certeza que deseja excluir este aluno?")){
    setAlunos(getAlunos().filter(a=>a.id!==id));carregarListas();
  }
}
function marcarPago(id){
  setAlunos(getAlunos().map(a=>a.id===id?{...a,pago:true}:a));carregarListas();
}
function copiarTexto(txt){navigator.clipboard.writeText(txt);alert("ğŸ“‹ Copiado!");}

// === LISTAS ===
function carregarListas(filtro=""){
  const alunos=getAlunos();
  const f=a=>a.nome.toLowerCase().includes(filtro.toLowerCase());
  const ordenar=lista=>lista.sort((a,b)=>a.nome.localeCompare(b.nome,"pt-BR"));

  const pend7=ordenar(alunos.filter(a=>!a.pago&&a.horario==='7'&&f(a)));
  const pag7=ordenar(alunos.filter(a=>a.pago&&a.horario==='7'&&f(a)));
  const pend8=ordenar(alunos.filter(a=>!a.pago&&a.horario==='8'&&f(a)));
  const pag8=ordenar(alunos.filter(a=>a.pago&&a.horario==='8'&&f(a)));
  const pendF=ordenar(alunos.filter(a=>!a.pago&&a.horario==='feminino'&&f(a)));
  const pagF=ordenar(alunos.filter(a=>a.pago&&a.horario==='feminino'&&f(a)));
  const pendK=ordenar(alunos.filter(a=>!a.pago&&a.horario==='kids'&&f(a)));
  const pagK=ordenar(alunos.filter(a=>a.pago&&a.horario==='kids'&&f(a)));

  preencher("listaPendentes7",pend7);preencher("listaPagos7",pag7);
  preencher("listaPendentes8",pend8);preencher("listaPagos8",pag8);
  preencher("listaPendentesFeminino",pendF);preencher("listaPagosFeminino",pagF);
  preencher("listaPendentesKids",pendK);preencher("listaPagosKids",pagK);
  atualizarResumo();
}

function preencher(id,alunos){
  const ul=document.getElementById(id);ul.innerHTML="";
  alunos.forEach(a=>{
    const li=document.createElement("li");
    li.innerHTML=`<span>${a.nome} - ${a.telefone} - R$${a.valor.toFixed(2)}</span>
    <div class="actions">
      ${!a.pago?`<button class='whatsapp' onclick="enviarWhatsApp('${a.nome}','${a.telefone}',${a.valor})">ğŸ’¬ Enviar</button>
      <button class='pago' onclick="marcarPago(${a.id})">âœ… Pago</button>`:""}
      <button class='editar' onclick="editarAluno(${a.id})">âœï¸ Editar</button>
      <button class='copiar' onclick="copiarTexto('${a.telefone}')">ğŸ“‹ Copiar</button>
      <button class='excluir' onclick="excluirAluno(${a.id})">ğŸ—‘ Excluir</button>
    </div>`;ul.appendChild(li);
  });
}

function atualizarResumo(){
  const alunos=getAlunos();
  const pend=alunos.filter(a=>!a.pago).reduce((s,a)=>s+a.valor,0);
  const pag=alunos.filter(a=>a.pago).reduce((s,a)=>s+a.valor,0);
  document.getElementById("resumoFinanceiro").innerText=`ğŸ”´ Pendentes: R$${pend.toFixed(2)} | ğŸŸ¢ Pagos: R$${pag.toFixed(2)}`;
}

function limparCampos(){nome.value="";telefone.value="";valor.value="";horario.value="7";editandoId=null;}

// === EXPORTAR / IMPORTAR ===
function exportarArquivo(){
  const alunos=getAlunos();
  if(!alunos.length){alert("âš ï¸ Nenhum aluno para exportar!");return;}
  const json=JSON.stringify(alunos,null,2);
  const blob=new Blob([json],{type:"text/plain;charset=utf-8"});
  const url=URL.createObjectURL(blob);
  const a=document.createElement("a");
  a.href=url;a.download="alunos_kickboxing.txt";a.click();
  URL.revokeObjectURL(url);
  alert("âœ… Arquivo exportado!");
}

function importarArquivo(){document.getElementById("inputImport").click();}
document.getElementById("inputImport").addEventListener("change",e=>{
  const file=e.target.files[0];if(!file)return;
  const r=new FileReader();
  r.onload=ev=>{
    try{
      let t=ev.target.result.trim();
      if(t.charCodeAt(0)===0xFEFF)t=t.slice(1);
      if(!t.startsWith("[")&&!t.startsWith("{"))t=atob(t);
      const alunos=JSON.parse(t);
      if(!Array.isArray(alunos))throw new Error();
      setAlunos(alunos);carregarListas();alert("âœ… Dados importados!");
    }catch{alert("âŒ Arquivo invÃ¡lido.");}
  };
  r.readAsText(file);
});

// === INICIALIZAÃ‡ÃƒO ===
document.addEventListener("DOMContentLoaded",()=>{
  atualizarCabecalhoData();

  // Adicionar automaticamente os novos alunos (7:00)
  const novos7 = [
    "Thaila - +55 71 8378-5519",
    "Any - +55 75 8113-6166",
    "Edineia C Damasceno - +55 75 8163-7115",
    "Jaquelineâ™¡ - +55 75 8185-6226",
    "Francys - +55 75 8186-6703",
    "Gabriela Oliveira - +55 75 8188-8153",
    "Luciana Suzart - +55 75 8201-8349",
    "Macielle Sena - +55 75 8216-2999",
    "S.A.M.YğŸ - ",
    "Manoelvitor202001 - +55 75 8283-1230",
    "Simone Silva - +55 75 8320-1447",
    "Roberval Batista ğŸ™‚ - +55 75 8346-4409",
    "Luiz - +55 75 8358-4628",
    "Adriano Severino ğŸ‘¼ğŸ¾ - +55 75 8362-8676"
  ];
  let alunos=getAlunos();
  novos7.forEach(txt=>{
    const [nome,telefone] = txt.split(" - ");
    if(!alunos.some(a=>a.nome.toLowerCase()===nome.toLowerCase() && a.horario==="7")){
      alunos.push({id:Date.now()+Math.random(),nome,telefone,valor:0,pago:false,data:new Date().toISOString(),horario:"7"});
    }
  });
  setAlunos(alunos);

  btnSalvar.onclick=()=>{const n=nome.value.trim(),t=telefone.value.trim(),v=parseFloat(valor.value)||0,h=horario.value;
    if(!n||!t){alert("âš ï¸ Preencha nome e telefone!");return;}salvarAluno(n,t,v,h);
  };
  buscaAluno.oninput=e=>carregarListas(e.target.value);
  btnExportar.onclick=exportarArquivo;
  btnImportar.onclick=importarArquivo;
  carregarListas();
});
</script>
</body>
</html>
